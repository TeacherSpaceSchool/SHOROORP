{"version":3,"sources":["component/PopularEvent.js","oplata.png"],"names":["PopularEvent","React","memo","props","_props$app","app","city","lang","_useState","useState","events","ads","_useState2","Object","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","popular","setPopular","useEffect","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","data","i","wrap","_context","prev","next","getOther","name","undefined","sent","length","dateTime","stringifyDateTime","realDate","sort","dateStartEnd","stringifyDateStartEnd","price","b","parseInt","stop","this","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","className","style","width","marginBottom","src","Oplata","alt","map","element","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","onClick","scrollToTop","to","nameRu","nameKg","imageThumbnail","onLoad","e","target","includes","image","where","window","open","link","connect","state","user","dispatch","appActions","bindActionCreators","userActions","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/24.e76adddb.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getOther } from '../redux/actions/app'\r\nimport { connect } from 'react-redux'\r\nimport * as appActions from '../redux/actions/app'\r\nimport * as userActions from '../redux/actions/user'\r\nimport { bindActionCreators } from 'redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { scrollToTop } from '../App'\r\nimport { stringifyDateTime, stringifyDateStartEnd } from '../redux/constants/other'\r\nimport Oplata from '../oplata.png';\r\n\r\nconst PopularEvent =  React.memo(\r\n    (props) =>{\r\n        const { city, lang } = props.app;\r\n        let [popular, setPopular] = useState({events: [], ads: {}});\r\n        useEffect(async ()=>{\r\n            let data = await getOther({name: 'Популярное', data: {city: city}});\r\n            if(data!=undefined) {\r\n                for (let i = 0; i < data.events.length; i++) {\r\n                    data.events[i].dateTime = stringifyDateTime(data.events[i].realDate.sort()[0]);\r\n                    data.events[i].dateStartEnd = stringifyDateStartEnd(data.events[i].realDate.sort());\r\n                    data.events[i].price.sort(function (a, b) {\r\n                        return parseInt(a.price) - parseInt(b.price)\r\n                    })\r\n                    data.events[i].price = data.events[i].price[0].price\r\n                }\r\n                data.ads = data.ads[0] === undefined ? {} : data.ads[0];\r\n                await setPopular(data)\r\n            }\r\n        },[city]);\r\n        return (\r\n            <main className='main-events-page'>\r\n                <div className='container'>\r\n                    <div className='row'>\r\n                        <div className='col-12'>\r\n                            <img style={{width: '100%', marginBottom: '30px'}} src={Oplata} alt />\r\n                        </div>\r\n                    </div>\r\n                    <div className='row'>\r\n                        <div className='col-xl-12 heading'>\r\n                            <div className='heading-title_wrap'>\r\n                                {lang==='ru'? 'Популярные' : 'Элдик'}\r\n                            </div>\r\n                            <div className='heading-title_line' />\r\n                        </div>{/* \\-heading*/}\r\n                    </div>{/* \\-row */}\r\n                    <div className='events'>\r\n                        <div className='row'>\r\n                            {popular.events.map((element) => {\r\n                                return (\r\n                                    <div className='col-12 col-sm-4 col-md-3 col-lg-3 col-xl-2'>\r\n                                        <div className='event'>\r\n                                            {element.dateStartEnd!==undefined?\r\n                                                <div className='event_date'>\r\n                                                    <div><span className='day'>{element.dateStartEnd[0]}</span><span className='month'>{element.dateStartEnd[1]}</span></div>\r\n                                                    <div className='line' />\r\n                                                    <div><span className='day'>{element.dateStartEnd[2]}</span><span className='month'>{element.dateStartEnd[3]}</span></div>\r\n                                                </div>\r\n                                                :\r\n                                                null\r\n                                            }\r\n                                            <div className='event_image'>\r\n                                                <Link onClick={()=>{scrollToTop()}}  to={'/event/'+(lang==='ru'? element.nameRu : element.nameKg)}><a><img  src={element.imageThumbnail} onLoad={(e)=>{if(e.target.src.includes('thumbnail')){e.target.src=element.image}}} alt /></a></Link>\r\n                                            </div>\r\n                                            <div className='event-content'>\r\n                                                <div className='event-content_title'>\r\n                                                    <Link onClick={()=>{scrollToTop()}}  to={'/event/'+(lang==='ru'? element.nameRu : element.nameKg)}><a>{lang==='ru'? element.nameRu : element.nameKg}</a></Link>\r\n                                                </div>\r\n                                                <div className='event-content_place'>\r\n                                                    <span className='event-content-place_text'><Link  to={'/hall/'+element.where.name}><a>{element.where.name}</a></Link></span>\r\n                                                </div>\r\n                                                <div className='event-content_info'>\r\n                                                    <div className='event-content-info_price'>\r\n                                                        от {element.price} сом\r\n                                                    </div>\r\n                                                    <div className='event-content-info_date'>\r\n                                                        {element.dateTime}\r\n                                                    </div>\r\n                                                    <div className='event-content-info_btn-wrap'>\r\n                                                        <Link onClick={()=>{scrollToTop()}}  to={'/event/'+(lang==='ru'? element.nameRu : element.nameKg)}><a className='event-content-info_btn'>Купить билет</a></Link>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n\r\n                        </div>\r\n                        <div className='row'>\r\n                            <div className='col-12'>\r\n                                <img style={{width: '100%', marginBottom: '30px'}} onClick={()=>{window.open(popular.ads.link, '_blank');}} src={popular.ads.imageThumbnail} onLoad={(e)=>{if(e.target.src.includes('thumbnail')){e.target.src=popular.ads.image}}} alt />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </main>        \r\n        );\r\n    }\r\n)\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        user: state.user,\r\n        app: state.app\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        appActions: bindActionCreators(appActions, dispatch),\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PopularEvent);\r\n","module.exports = __webpack_public_path__ + \"static/media/oplata.15cddd07.png\";"],"sourceRoot":""}