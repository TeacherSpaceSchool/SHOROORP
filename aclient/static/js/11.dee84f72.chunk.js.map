{"version":3,"sources":["page/Profile.js"],"names":["Profile","React","memo","props","lang","app","user","authenticated","history","push","_useState","useState","_useState2","Object","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","pass","setPass","_useState3","_useState4","name","setName","_useState5","_useState6","surname","setSurname","_useState7","_useState8","email","setEmail","_useState9","_useState10","phone","setPhone","setProfile","_ref","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","data","wrap","_context","prev","next","length","getSecure","phonenumber","password","sent","window","location","reload","alert","stop","this","apply","arguments","useEffect","_callee2","_context2","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","Fragment","className","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","value","onChange","event","target","type","placeholder","htmlFor","href","download","defaultValue","onClick","connect","state","dispatch","appActions","bindActionCreators"],"mappings":"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","file":"static/js/11.dee84f72.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport * as appActions from '../redux/actions/app'\r\nimport { bindActionCreators } from 'redux'\r\nimport { getSecure } from '../redux/actions/app'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Profile = React.memo(\r\n    (props) =>{\r\n        const { lang } = props.app;\r\n        const { authenticated } = props.user;\r\n        if(!authenticated) props.history.push('/');\r\n        let [pass, setPass] = useState('');\r\n        let handlePass =  (event) => {\r\n            setPass(event.target.value)\r\n        };\r\n        let [name, setName] = useState('');\r\n        let handleName =  (event) => {\r\n            setName(event.target.value)\r\n        };\r\n        let [surname, setSurname] = useState('');\r\n        let handleSurname =  (event) => {\r\n            setSurname(event.target.value)\r\n        };\r\n        let [email, setEmail] = useState('');\r\n        let handleEmail =  (event) => {\r\n            setEmail(event.target.value)\r\n        };\r\n        let [phone, setPhone] = useState('');\r\n        let handlePhone =  (event) => {\r\n            setPhone(event.target.value)\r\n        };\r\n        let setProfile = async () => {\r\n            if(email.length>0&&name.length>0&&surname.length>0&&phone.length>0){\r\n                let data = await getSecure({name: 'ИзменитьПрофиль', data: {email: email, name: name, surname: surname, phonenumber: phone, password: pass}})\r\n                await setEmail(data.email)\r\n                await setSurname(data.surname)\r\n                await setName(data.name)\r\n                await setPhone(data.phonenumber)\r\n                await setPass('')\r\n                await window.location.reload();\r\n            } else alert( 'Заполните все поля!!!' );\r\n        };\r\n        useEffect(async ()=>{\r\n            let data = await getSecure({name: 'Профиль'})\r\n            setEmail(data.email)\r\n            setSurname(data.surname)\r\n            setName(data.name)\r\n            setPhone(data.phonenumber)\r\n        },[]);\r\n        return (\r\n            <>\r\n            <div className='main-buy page-profile'>\r\n                <div className='container'>\r\n                    <div className='row'>\r\n                        <div className='col-12 page-menu-wrap'>\r\n                            <ul className='nav page-menu'>\r\n                                <li className='active'><a>{lang==='ru'? 'Профиль' : 'Профиль'}</a></li>\r\n                                <li><Link to='/historyevent'><a>{lang==='ru'? 'Заказы мероприятия' : 'Буйруктар ченөө'}</a></Link></li>\r\n                                <li><Link to='/historycinema'><a>{lang==='ru'? 'Заказы кино' : 'Буйруктар кино'}</a></Link></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div className='row'>\r\n                        <div className='col-12 col-md-5'>\r\n                            <fieldset className='fields-change-pass'>\r\n                                <legend>{lang==='ru'? 'Изменение пароля' : 'Пароль өзгөртүү'}</legend>\r\n                                <div className='form-group'>\r\n                                    <input value={pass} onChange={handlePass} className='form-control' type='text' placeholder={lang==='ru'? 'Новый пароль' : 'Пароль жаңы'} />\r\n                                </div>\r\n                            </fieldset>\r\n                            <fieldset className='fields-contacts'>\r\n                                <legend>{lang==='ru'? 'Контактные данные' : 'Байланыш маалыматтары'}</legend>\r\n                                <div className='form-group'>\r\n                                    <input value={name} onChange={handleName} className='form-control' type='text' placeholder={lang==='ru'? 'Имя' : 'Ысым'} />\r\n                                </div>\r\n                                <div className='form-group'>\r\n                                    <input value={surname} onChange={handleSurname} className='form-control' type='text' placeholder={lang==='ru'? 'Фамилия' : 'Фамилия'} />\r\n                                </div>\r\n                                <div className='form-group'>\r\n                                    <input value={email} onChange={handleEmail} className='form-control' type='text' placeholder='Email' />\r\n                                </div>\r\n                                <label htmlFor='flat-checkbox-1' className='icheck'>\r\n                                    Формат: +996705356742\r\n                                </label>\r\n                                <div className='form-group'>\r\n                                    <input value={phone} onChange={handlePhone} className='form-control' type='text' placeholder={lang==='ru'? 'Номер телефона' : 'Телефон номуру'} />\r\n                                </div>\r\n                                  </fieldset>\r\n                            <fieldset className='fields-agreement'>\r\n                                <legend>{lang==='ru'? 'Условия договора' : 'Келишимдин шарттары'}</legend>\r\n                                <div className='checkbox icheck form-group'>\r\n                                    <label htmlFor='flat-checkbox-1' className='icheck'>\r\n                                        {lang==='ru'? <p>В случае заполнения регистрационных данных и подтверждения оплаты Вы автоматически соглашаетесь с <a href='http://kassir.kg/document/публ_оферта.docx' download target='_blank'>условиями договора оферты.</a></p> : <p>Сиздин төлөм маалыматты толтуруу учурунда, ошондой эле тастыктоо, сиз дароо эле <a href='http://kassir.kg/document/публ_оферта.docx' download> сунуш келишимдин шарттарына макул.</a></p>}\r\n                                    </label>\r\n                                </div>\r\n                            </fieldset>\r\n                            <div className='form-group field-button'>\r\n                                <input className='btn btn-primary' type='submit' defaultValue={lang==='ru'? 'Сохранить изменения' : 'Сактоо өзгөртүүлөрдү'} onClick={()=>{setProfile()}} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </>\r\n        );\r\n    })\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        app: state.app,\r\n        user: state.user,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        appActions: bindActionCreators(appActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n"],"sourceRoot":""}