(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{115:function(e,a,t){"use strict";t.r(a);var c=t(2),n=t.n(c),l=t(3),r=t(8),s=t(0),m=t.n(s),i=t(4),d=t(9),o=t(5),u=t(16),p=(t(81),t(80)),E=function(e){var a=e.seats,t=e.holderSeats,c=e.seance,i=Object(s.useState)([]),d=Object(r.a)(i,2),o=d[0],u=d[1],E=function(){for(var e=[],t=0;t<a.length;t++){e[t]=[];for(var c=0;c<a[t].length;c++)e[t][c]=!1}u(e)},v=function(e,a){var t=o;t[e][a]=!t[e][a],u(t)};return Object(s.useEffect)(Object(l.a)(n.a.mark(function e(){var t,c,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==a){for(t=[],c=0;c<a.length;c++)for(t[c]=[],l=0;l<a[c].length;l++)t[c][l]=!1;u(t)}case 1:case"end":return e.stop()}},e,this)})),[a]),m.a.createElement(m.a.Fragment,null,void 0!==a?m.a.createElement("div",{style:{width:26*a[0].length+150+"px"}},m.a.createElement("div",{className:"part-div-price",style:{width:"500px"}},m.a.createElement("div",{className:"part-number"}),m.a.createElement("div",{className:"part-empty",style:{background:"black"}}),m.a.createElement("div",{className:"part-price"},"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e"),m.a.createElement("div",{className:"part-empty",style:{background:"red"}}),m.a.createElement("div",{className:"part-price"},"\u041f\u0440\u043e\u0434\u0430\u043d\u043e")),a.map(function(e,r){return m.a.createElement("div",null,m.a.createElement("div",{className:"part-number"},"\u0420\u044f\u0434: "+e[0].name.split(":")[0].split(" ")[1]),e.map(function(e,s){return"seat"===e.type&&"reserve"!==e.status?m.a.createElement("div",{style:{display:"inline-block"}},m.a.createElement(p.a,{style:{fontSize:"13px"},content:"red"!==e.color?a[r][s].name+("gray"!==e.color?" \u0446\u0435\u043d\u0430: "+a[r][s].price+" \u0441\u043e\u043c":""):"\u041f\u0440\u043e\u0434\u0430\u043d\u043e"},m.a.createElement("div",{onClick:Object(l.a)(n.a.mark(function l(){return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("block"===e.status||"sold"===e.status||"reserve"===e.status){n.next=12;break}if("red"===e.color){n.next=8;break}return n.next=4,E();case 4:return n.next=6,v(r,s);case 6:n.next=12;break;case 8:a[r][s].status="free",a[r][s].color="indigo",c.seats=a,t(e,c);case 12:case"end":return n.stop()}},l,this)})),className:"part",style:{background:e.color}},m.a.createElement("div",{className:"part-text"},e.name.split(":")[1].split(" ")[0]))),o.length>0&&o[r][s]?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"gallery-subbackground",onClick:function(){E()}}),m.a.createElement("div",{className:"header-submenu"},m.a.createElement("div",{className:"header-submenu-item",onClick:function(){a[r][s].priceSelect=e.price,a[r][s].color="red",a[r][s].status="hold",c.seats=a,t(e,c),E()}},"\u0412\u0437\u0440\u043e\u0441\u043b\u044b\u0439: ",e.price),e.priceKid.length>0&&parseInt(e.priceKid)>0?m.a.createElement("div",{className:"header-submenu-item",onClick:function(){a[r][s].priceSelect=e.priceKid,a[r][s].color="red",a[r][s].status="hold",c.seats=a,t(e,c),E()}},"\u0414\u0435\u0442\u0441\u043a\u0438\u0439: ",e.priceKid):null,e.priceStud.length>0&&parseInt(e.priceStud)>0?m.a.createElement("div",{className:"header-submenu-item",onClick:function(){a[r][s].priceSelect=e.priceStud,a[r][s].color="red",a[r][s].status="hold",c.seats=a,t(e,c),E()}},"\u0421\u0442\u0443\u0434\u0435\u043d: ",e.priceStud):null)):null):m.a.createElement("div",{className:"part-empty",style:{background:e.color}})}))})):null)},v=m.a.memo(function(e){var a=e.app,t=(a.lang,a.city,e.user.authenticated),c=Object(s.useState)(new Date),d=Object(r.a)(c,2),o=d[0],p=d[1],v=Object(s.useState)(void 0),N=Object(r.a)(v,2),f=N[0],b=N[1],h=Object(s.useState)([]),g=Object(r.a)(h,2),k=g[0],j=g[1],y=new Date,w=Object(s.useState)([]),O=Object(r.a)(w,2),x=O[0],S=O[1],_=Object(s.useState)(0),D=Object(r.a)(_,2),C=D[0],F=D[1],J=Object(s.useState)(void 0),K=Object(r.a)(J,2),I=K[0],T=K[1],q=[new Date,new Date(y.setDate(y.getDate()+1)),new Date(y.setDate(y.getDate()+1)),new Date(y.setDate(y.getDate()+1)),new Date(y.setDate(y.getDate()+1))],z=Object(s.useState)({}),A=Object(r.a)(z,2),L=A[0],P=A[1],B=Object(s.useState)({}),G=Object(r.a)(B,2),H=G[0],M=G[1],Q=function(){var e=Object(l.a)(n.a.mark(function e(a,t){var c,l,r,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(T(t),l=-1,(c=x).find(function(e,t){JSON.stringify(e)===JSON.stringify(a)&&(l=t)}),-1===l?c.push(a):c.splice(l,1),r=0,s=0;s<c.length;s++)r+=parseInt(c[s].priceSelect);F(r),S(c);case 9:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(l.a)(n.a.mark(function a(){var c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(i.getOther)({name:"\u041a\u0438\u043d\u043e\u041f\u043e\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044e",data:{name:e.location.pathname.split("/")[2]}});case 2:return c=a.sent,a.next=5,M(c);case 5:if(!t){a.next=12;break}return a.next=8,Object(i.getSecure)({name:"\u0411\u0430\u043b\u0430\u043d\u0441"});case 8:c=a.sent,W(c.balance),a.next=13;break;case 12:W(0);case 13:case"end":return a.stop()}},a,this)})),[]),Object(s.useEffect)(Object(l.a)(n.a.mark(function e(){var a,t,c,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===H.name){e.next=16;break}if(void 0===f.cinema){e.next=13;break}for(a=L,t=Object.keys(a),c=0;c<t.length;c++)a[t[c]]=!1;return a[f.cinema]=!0,P(a),e.next=9,Object(i.getOther)({name:"\u0421\u0435\u0430\u043d\u0441\u041f\u043e\u0414\u0430\u0442\u0435",data:{movie:H._id,cinema:f.cinema,realDate:f.date}});case 9:l=e.sent,T(l),e.next=14;break;case 13:T(void 0);case 14:S([]),F(0);case 16:case"end":return e.stop()}},e,this)})),[f]),Object(s.useEffect)(Object(l.a)(n.a.mark(function e(){var a,t,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===H.name){e.next=9;break}return e.next=3,Object(i.getOther)({name:"\u041a\u0438\u043d\u043e\u041f\u043e\u0414\u0430\u0442\u0435",data:{movie:H._id,realDate:o}});case 3:for(a=e.sent,j(a),t={},c=0;c<a.length;c++)t[a[c].name]=!1;P(t),b({});case 9:case"end":return e.stop()}},e,this)})),[o]);var R=Object(s.useState)(""),U=Object(r.a)(R,2),V=U[0],W=U[1],X=function(){var a=Object(l.a)(n.a.mark(function a(){var c,l,r,s,m,d,o,p;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=4;break}alert("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e!!!"),a.next=18;break;case 4:if(!(V<C)){a.next=8;break}alert("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432!!!"),a.next=18;break;case 8:for(c=[],l=I,r=0;r<l.seats.length;r++)for(s=0;s<l.seats[r].length;s++)"hold"===l.seats[r][s].status&&(l.seats[r][s].status="sold");for(m=f.date.split("T")[0].split("-"),d=f.date.split("T")[1].split(":"),o=m[2]+" "+u.a[m[1]]+" "+m[0]+", "+d[0]+":"+d[1],p=0;p<x.length;p++)x[p].date=o,c[p]=x[p];return a.next=17,Object(i.getSecure)({name:"\u041a\u0443\u043f\u0438\u0442\u044c\u041a\u0438\u043d\u043e",data:{image:H.image,event:l,movie:H.name,cinema:l.cinema.split("|")[0],hall:l.cinema.split("|")[1],fullPrice:C,seats:c}});case 17:e.history.push("/historycinema");case 18:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}();return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"main-buy kino-detail"},m.a.createElement("div",{className:"film-detail-wrap"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-12 trailer-wrap"},m.a.createElement("div",{className:"trailer"},m.a.createElement("div",{style:{height:"85px"}}),m.a.createElement("div",{className:"trailer-video-wrap",id:"trailer-video",style:{display:"none"}},m.a.createElement("video",{width:"100%",controls:!0,id:"trailer-video-18891",className:"trailer-video",src:"https://api.kinohod.ru/o/3f/32/3f324763-9611-45c7-9fbc-aa57e8771237.mp4",poster:"https://api.kinohod.ru/c/900x450/8d/c4/8dc494f8-ad0b-4505-bec7-d86e76a0fa6b.jpg"})),m.a.createElement("div",{className:"trailer_description"},m.a.createElement("div",{className:"trailer_title"},m.a.createElement("h1",{className:"name"},H.name),m.a.createElement("div",{className:"genre"},H.genre),m.a.createElement("div",{className:"age"},H.ageCategory)))))),m.a.createElement("div",{className:"film-detail"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-3"},m.a.createElement("div",{className:"film-detail_image"},m.a.createElement("img",{src:H.imageThumbnail,onLoad:function(e){e.target.src.includes("thumbnail")&&(e.target.src=H.image)},alt:!0}))),m.a.createElement("div",{className:"col-5"},m.a.createElement("div",{className:"film-detail_info"},m.a.createElement("table",{className:"table"},m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{className:"name"},"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c:"),m.a.createElement("td",{className:"prop"},H.duration)),m.a.createElement("tr",null,m.a.createElement("td",{className:"name"},"\u041f\u0440\u0435\u043c\u044c\u0435\u0440\u0430:"),m.a.createElement("td",{className:"prop"},H.premier)),m.a.createElement("tr",null,m.a.createElement("td",{className:"name"},"\u0420\u0435\u0436\u0438\u0441\u0441\u0451\u0440\u044b:"),m.a.createElement("td",{className:"prop"},H.producers)),m.a.createElement("tr",null,m.a.createElement("td",{className:"name"},"\u0412 \u0440\u043e\u043b\u044f\u0445:"),m.a.createElement("td",{className:"prop"},H.actors)))))),m.a.createElement("div",{className:"col-4"},m.a.createElement("div",{className:"film-detail_description"},m.a.createElement("p",null,H.description))))))),m.a.createElement("div",{className:"schedule-wrap"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-12"},m.a.createElement("div",{className:"schedule"},m.a.createElement("div",{className:"schedule_filter-section"},m.a.createElement("div",{className:"schedule_title"},m.a.createElement("h2",null,"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0435\u0430\u043d\u0441\u043e\u0432")),m.a.createElement("div",{className:"schedule_days-list"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-2"},m.a.createElement("a",{className:o===q[0]?"day-item js-day-item active":"day-item js-day-item",onClick:function(){p(q[0])}},m.a.createElement("span",{className:"date"},Object(u.b)(q[0])),"\u0421\u0435\u0433\u043e\u0434\u043d\u044f")),m.a.createElement("div",{className:"col-2"},m.a.createElement("a",{className:o===q[1]?"day-item js-day-item active":"day-item js-day-item",onClick:function(){p(q[1])}},m.a.createElement("span",{className:"date"},Object(u.b)(q[1])),"\u0417\u0430\u0432\u0442\u0440\u0430")),m.a.createElement("div",{className:"col-2"},m.a.createElement("a",{className:o===q[2]?"day-item js-day-item active":"day-item js-day-item",onClick:function(){p(q[2])}},m.a.createElement("span",{className:"date"},Object(u.b)(q[2])))),m.a.createElement("div",{className:"col-2"},m.a.createElement("a",{className:o===q[3]?"day-item js-day-item active":"day-item js-day-item",onClick:function(){p(q[3])}},m.a.createElement("span",{className:"date"},Object(u.b)(q[3])))),m.a.createElement("div",{className:"col-2"},m.a.createElement("a",{className:o===q[4]?"day-item js-day-item active":"day-item js-day-item",onClick:function(){p(q[4])}},m.a.createElement("span",{className:"date"},Object(u.b)(q[4])))))),m.a.createElement("div",{className:"map"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-12"}))))))))),m.a.createElement("div",{className:"cinema-list-container"},k.map(function(e,a){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"cinema-row"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"place"},m.a.createElement("div",{className:"name"},m.a.createElement("div",{className:"title"},m.a.createElement("a",{className:"cinema-icon"}),m.a.createElement("a",null,e.name.split("|")[0]))),m.a.createElement("div",{className:"address"},e.name.split("|")[1])),m.a.createElement("div",{className:"right"},m.a.createElement("div",{className:"section"},m.a.createElement("div",{className:"times"},e.seance.map(function(t,c){return m.a.createElement(m.a.Fragment,null,m.a.createElement("input",{type:"radio",onClick:function(){b({date:t.realDate,cinema:e.name})}}),m.a.createElement("label",{htmlFor:"time"+a+c,onClick:function(){b({date:t.realDate,cinema:e.name})}},m.a.createElement("b",null,t.type),"\xa0",t.price,"\xa0\u0441\u043e\u043c\xa0",Object(u.e)(t.realDate)))})))))),L[e.name]?m.a.createElement("div",{className:"schem-container"},m.a.createElement("div",{className:"change-place"},m.a.createElement("div",{className:"change-place_content"},void 0!==I&&void 0!==I.seats?m.a.createElement(E,{seats:I.seats,holderSeats:Q,seance:I}):null),m.a.createElement("div",{className:"change-place_footer"},m.a.createElement("div",{className:"container wrap"},m.a.createElement("div",{className:"amount-ticket"},"\u0412\u0441\u0435\u0433\u043e ",m.a.createElement("br",null),x.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432"),m.a.createElement("div",{className:"ticket"},x.map(function(e){return m.a.createElement("div",null,m.a.createElement("span",{className:"white"},e.name))})),m.a.createElement("div",{className:"price"},m.a.createElement("div",null,"\u0418\u0442\u043e\u0433\u043e:",m.a.createElement("span",null,C,"\xa0\u0441\u043e\u043c"))),m.a.createElement("div",{className:"order-wrap"},m.a.createElement("a",{onClick:X,className:"btn btn-primary order-btn"},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"))))),m.a.createElement("div",{className:"order-form"},m.a.createElement("form",{action:"#"},m.a.createElement("div",{className:"ticket-information"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-12"},m.a.createElement("span",{className:"back-to-schem"},"\u041d\u0430\u0437\u0430\u0434"))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-4"},m.a.createElement("div",{className:"ticket_img"},m.a.createElement("img",{src:"img/film-detail1.jpg",alt:!0}))),m.a.createElement("div",{className:"col-3 ticket_info-wrap"},m.a.createElement("div",{className:"ticket_info"},m.a.createElement("div",{className:"ticket_title"},"\u0401\u043b\u043a\u0438 \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435"),m.a.createElement("div",{className:"ticket_date"},"6 \u044f\u043d\u0432\u0430\u0440\u044f, \u0432\u0441, 11:00",m.a.createElement("br",null),"\u0417\u0430\u043b 7"),m.a.createElement("div",{className:"ticket_labels"},m.a.createElement("div",{className:"label"},"\u041e\u0431\u044b\u0447\u043d\u044b\u0435 \u0441\u0435\u0430\u043d\u0441\u044b 2D"),m.a.createElement("div",{className:"label"},"6+")),m.a.createElement("div",{className:"ticket_place"},m.a.createElement("div",{className:"column"},"\u0440\u044f\u0434 ",m.a.createElement("span",{className:"white"},"2")),m.a.createElement("div",{className:"place"},"\u043c\u0435\u0441\u0442\u043e ",m.a.createElement("span",{className:"white"},"8"))))),m.a.createElement("div",{className:"col-5"},m.a.createElement("div",{className:"ticket_form"},m.a.createElement("div",{className:"form-group name"},m.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0418\u043c\u044f","aria-required":"true"}),m.a.createElement("div",{className:"help-block"})),m.a.createElement("div",{className:"email"},m.a.createElement("div",{className:"form-group name"},m.a.createElement("input",{type:"text",className:"form-control",placeholder:"Email","aria-required":"true"}),m.a.createElement("div",{className:"help-block"}))))))),m.a.createElement("div",{className:"change-place_footer info_footer"},m.a.createElement("div",{className:"container wrap"},m.a.createElement("div",{className:"info"},"\u041d\u0430\u0436\u0438\u043c\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0443 \xab\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c\xbb, \u0432\u044b \u0441\u043e\u0433\u043b\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044c \u0441 ",m.a.createElement("a",null,"\u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0438"),"."),m.a.createElement("div",{className:"price"},m.a.createElement("div",null,"\u0418\u0442\u043e\u0433\u043e:",m.a.createElement("span",null,"1740 \u0440\u0443\u0431."))),m.a.createElement("div",{className:"order-wrap"},m.a.createElement("a",{className:"btn btn-primary order-btn"},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c")))))))):null)}))))});a.default=Object(d.b)(function(e){return{user:e.user,app:e.app}},function(e){return{appActions:Object(o.b)(i,e)}})(v)},81:function(e,a,t){}}]);
//# sourceMappingURL=7.b5a02f7f.chunk.js.map