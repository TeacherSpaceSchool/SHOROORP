(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{389:function(e,t,n){"use strict";n.r(t),n.d(t,"datePicker",function(){return S});var a=n(7),i=n.n(a),o=n(17),r=n(393),c=n(0),u=n.n(c),s=n(3),l=n.n(s),g=n(4),d=n(63),f=n(38),p=n(80),m=n(413),b=n(49),h=n.n(b),v=n(100),w=n(434),x=n.n(w),j=n(585),k=n(451),E=n.n(k),O=n(47),S=u.a.createRef(),y=void 0===v.b||v.b.current.offsetWidth>800?20:10,R=void 0===v.b||v.b.current.offsetWidth>800?500:240,P=u.a.memo(function(e){var t=e.classes,n=e.mini_dialogActions,a=n.showSelectRegion,s=n.showSelectPoint,l=e.tableActions,g=l.setSelectedRegionGeo,d=l.setSelectedPointGeo,f=e.snackbarActions.showSnackBar,m=e.table,b=m.regionGeo,w=m.pointGeo,k=e.user.status,O=e.app.profile,S=Object(c.useState)([]),y=Object(r.a)(S,2),R=y[0],P=y[1];Object(c.useEffect)(function(){Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===w.guid.length||0===b.guid.length){e.next=7;break}return e.next=3,p.getDataSimple({name:"\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f",data:{guidRegion:b.guid,guidPoint:w.guid}});case 3:0===(t=e.sent).length?P([{point:w.name,geo:"42.8700000, 74.5900000",region:b.name,guidPoint:w.guid,guidRegion:b.guid}]):P(t),e.next=12;break;case 7:return e.t0=P,e.next=10,p.getDataSimple({name:"\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f",data:{guidRegion:b.guid,guidPoint:w.guid}});case 10:e.t1=e.sent,(0,e.t0)(e.t1);case 12:case"end":return e.stop()}},e,this)}))()},[w,b]),Object(c.useEffect)(function(){Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"active"===k.status&&["admin","\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440","\u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440"].includes(k.role)||e.history.push("/"),void 0!==k.role&&"admin"!==k.role&&(g({name:O.region,guid:O.guidRegion}),"\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440"!==k.role&&d({name:O.point,guid:O.guidPoint}));case 2:case"end":return t.stop()}},t,this)}))()},[]);var C=Object(c.useState)(600),A=Object(r.a)(C,2),D=A[0],G=A[1];Object(c.useEffect)(function(){Object(o.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:G(v.b.current.offsetWidth>1e3?[1e3,500]:[v.b.current.offsetWidth,300]);case 1:case"end":return e.stop()}},e,this)}))()},[]);var W=function(e){var t=e.get("target").geometry.getCoordinates();z(t[0]+", "+t[1])},z=function(){var e=Object(o.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.next=3,p.getDataSimple({name:"\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",data:{point:w.name,geo:t,region:b.name,guidRegion:b.guid,guidPoint:w.guid}});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(j.c,null,u.a.createElement("center",null,u.a.createElement("br",null),u.a.createElement("h1",null,"\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f"),u.a.createElement(h.a,{variant:"outlined",onClick:function(){"admin"===k.role&&a()},className:t.button},b.name),u.a.createElement(h.a,{variant:"outlined",onClick:function(){["admin","\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440"].includes(k.role)&&s()},className:t.button},w.name),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(j.a,{height:D[1],width:D[0],defaultState:{center:[42.87,74.59],zoom:12}},void 0!=R&&R.length>0?R.map(function(e,t){return u.a.createElement(j.b,{onDragEnd:W,key:t,options:{draggable:0!==w.guid.length&&0!==w.guid.length,iconColor:"#252850"},properties:{iconCaption:e.point},geometry:e.geo.split(", ")})}):null)),0!==w.guid.length&&0!==w.guid.length?u.a.createElement(x.a,{color:"primary","aria-label":"\u041d\u0430\u0439\u0442\u0438 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e",className:t.fab,onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){z(e.coords.latitude+", "+e.coords.longitude)}):f("\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f")}},u.a.createElement(E.a,null)):null)});Event.propTypes={classes:l.a.object.isRequired},t.default=Object(g.withStyles)(function(e){return{fab:{position:"fixed",bottom:y,right:y},fab2:{position:"fixed",bottom:y+76,right:y},button:{width:"200px",margin:e.spacing.unit},textFieldDate:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:R/2},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}})(Object(d.b)(function(e){return{table:e.table,user:e.user,app:e.app}},function(e){return{tableActions:Object(f.b)(p,e),snackbarActions:Object(f.b)(O,e),mini_dialogActions:Object(f.b)(m,e)}})(P))}}]);
//# sourceMappingURL=22.1ea171f9.chunk.js.map