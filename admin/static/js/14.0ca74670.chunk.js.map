{"version":3,"sources":["component/Table.js","logo.png"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","mui_datatables__WEBPACK_IMPORTED_MODULE_1__","mui_datatables__WEBPACK_IMPORTED_MODULE_1___default","react_redux__WEBPACK_IMPORTED_MODULE_2__","redux__WEBPACK_IMPORTED_MODULE_3__","_redux_actions_table__WEBPACK_IMPORTED_MODULE_4__","_redux_actions_mini_dialog__WEBPACK_IMPORTED_MODULE_5__","react_image_gallery__WEBPACK_IMPORTED_MODULE_6__","react_image_gallery__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_8__","_App__WEBPACK_IMPORTED_MODULE_9__","_logo_png__WEBPACK_IMPORTED_MODULE_10__","_logo_png__WEBPACK_IMPORTED_MODULE_10___default","message","mainWindow","current","offsetWidth","a","createElement","Fragment","style","fontWeight","fontSize","width","Table","React","memo","props","classes","_props$table","table","row","count","page","data","data1","name","search","sort","_props$tableActions","tableActions","getData","setSelected","deleteData","setOldFile","setDeletedId","_props$mini_dialogAct","mini_dialogActions","showAddMiniDialog","setMiniDialog","showMiniDialog","showDelete","authenticated","user","options","serverSide","filterType","filter","print","downloadOptions","rowsPerPage","rowsPerPageOptions","onColumnSortChange","changedColumn","direction","onSearchChange","searchText","onChangePage","currentPage","onRowsDelete","rowsDeleted","deletedId","oldFile","i","length","push","index","undefined","substring","includes","JSON","stringify","onCellClick","colData","colMeta","toString","images","split","original","thumbnail","items","showThumbnails","showFullscreenButton","showPlayButton","rowIndex","history","onTableChange","action","tableState","theme","createMuiTheme","overrides","MUIDataTableBodyCell","root","textOverflow","maxHeight","maxWidth","overflow","wordWrap","title","columns","className","mainMessage","src","logo","withStyles","backgroundImage","backgroundPosition","backgroundRepeat","height","display","justifyContent","alignItems","color","marginTop","spacing","unit","marginBottom","marginLeft","marginRight","connect","state","dispatch","bindActionCreators","module","exports","p"],"mappings":"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","file":"static/js/14.0ca74670.chunk.js","sourcesContent":["import React from 'react';\r\nimport MUIDataTable from 'mui-datatables';\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport * as tableActions from '../redux/actions/table'\r\nimport * as mini_dialogActions from '../redux/actions/mini_dialog'\r\nimport ImageGallery from 'react-image-gallery';\r\nimport 'react-image-gallery/styles/css/image-gallery.css';\r\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { mainWindow } from '../App'\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport logo from '../logo.png';\r\n\r\nconst message = mainWindow.current.offsetWidth>800?\r\n    <>\r\n        ОРП\r\n        <br/>\r\n        <i style={{fontWeight: '500', fontSize: '18px'}}>Для начала выберите пункт в боковом меню</i>\r\n    </>\r\n    :\r\n    <>\r\n    ОРП\r\n        <br/>\r\n        <i style={{fontWeight: '500', fontSize: '18px'}}>Для начала нажмите значок и выберите пункт в боковом меню</i>\r\n    </>;\r\nconst width = mainWindow.current.offsetWidth>800? 500: 240;\r\nconst styles = theme => ({\r\n    mainMessage: {\r\n        backgroundImage: \"url('/gora.jpg')\",\r\n        backgroundPosition: 'center center',\r\n        backgroundRepeat: 'no-repeat',\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    message: {\r\n        color: '#ffffff',\r\n        fontWeight: 'bold',\r\n        fontSize: '20px',\r\n        width: width,\r\n        marginTop: theme.spacing.unit,\r\n        marginBottom: theme.spacing.unit,\r\n        marginLeft: 'calc((100% - '+width+'px)/2)',\r\n        marginRight: 'calc((100% - '+width+'px)/2)'\r\n    }\r\n});\r\n\r\nconst Table = React.memo(\r\n    (props) => {\r\n        const { classes } = props;\r\n        let getMuiTheme = () => createMuiTheme({\r\n            overrides: {\r\n                MUIDataTableBodyCell: {\r\n                    root: {\r\n                        textOverflow: 'ellipsis',\r\n                        maxHeight: '500px',\r\n                        maxWidth: '200px',\r\n                        overflow: 'hidden',\r\n                        wordWrap: 'break-word'\r\n                    }\r\n                }\r\n\r\n            }\r\n        })\r\n        const { row, count, page, data, data1, name, search, sort } = props.table;\r\n        const { getData, deleteData, setSelected, setOldFile, setDeletedId } = props.tableActions;\r\n        const { showAddMiniDialog, setMiniDialog, showMiniDialog, showDelete } = props.mini_dialogActions;\r\n        const { authenticated } = props.user;\r\n        const options = {\r\n            serverSide: true,\r\n            filterType: 'checkbox',\r\n            filter: false,\r\n            print: false,\r\n            downloadOptions: false,\r\n            rowsPerPage: 10,\r\n            count: count,\r\n            page: page,\r\n            rowsPerPageOptions: false,\r\n            onColumnSortChange: (changedColumn, direction) => {\r\n                getData({search: search, sort: [changedColumn, direction], page: page, name: name})\r\n                setSelected(-1)\r\n            },\r\n            onSearchChange: (searchText) => {\r\n                getData({search: searchText, sort: '', page: 0, name: name})\r\n                setSelected(-1)\r\n            },\r\n            onChangePage: (currentPage) => {\r\n                getData({search: search, sort: sort, page: currentPage, name: name})\r\n                setSelected(-1)\r\n            },\r\n            onRowsDelete: (rowsDeleted) => {\r\n                let deletedId = [], oldFile = '';\r\n                for(let i=0; i<rowsDeleted.data.length; i++){\r\n                    if(name === 'Блог'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][1])\r\n                    } else if(name === 'Машина'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][0])\r\n                    } else if(name === 'Организатор'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][2])\r\n                    } else if(name === 'Реализатор'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][3])\r\n                    } else if(name === 'Точка'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][0]+'|'+data[rowsDeleted.data[i].index][1])\r\n                    } else if(name === 'Регион'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][0])\r\n                    } else if(name === 'Завсклада'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][1])\r\n                    } else if(name === 'План'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][0])\r\n                    } else if(name === 'Цена'){\r\n                        deletedId.push(data[rowsDeleted.data[i].index][0])\r\n                    } else if(name === 'Накладная на пустую тару'||name === 'Накладная склад №1'||name === 'Накладная склад №2'||name === 'Накладная на вечерний возврат'||name === 'Отчет организатора'){\r\n                        deletedId.push('|'+data[rowsDeleted.data[i].index][0]+'|'+data[rowsDeleted.data[i].index][1])\r\n                    } else if(name === 'Отчет реализатора'){\r\n                        deletedId.push('|'+'|'+data[rowsDeleted.data[i].index][0]+'|'+data[rowsDeleted.data[i].index][1])\r\n                    } else\r\n                        deletedId.push(data[rowsDeleted.data[i].index][data[rowsDeleted.data[i].index].length-1])\r\n                    if(data[rowsDeleted.data[i].index][0]!=undefined&&\r\n                        (data[rowsDeleted.data[i].index][0].substring(0, 1).includes('/')||data[rowsDeleted.data[i].index][0].includes('http')||data[rowsDeleted.data[i].index][0].includes('https')))\r\n                        oldFile += '\\n' + data[rowsDeleted.data[i].index][0]\r\n                }\r\n                showDelete()\r\n                setOldFile(oldFile)\r\n                setDeletedId(JSON.stringify(deletedId))\r\n                setSelected(-1)\r\n            },\r\n            onCellClick: (colData, colMeta) => {\r\n                colData = colData.toString()\r\n                if(colData!=undefined&&!(colData.substring(0, 1).includes('/')||colData.includes('http')||colData.includes('https'))) {\r\n                    setSelected(colMeta.rowIndex)\r\n                    if(name === 'План'){\r\n                        props.history.push('/plan')\r\n                    } else if(name === 'Накладная на пустую тару'){\r\n                        props.history.push('/nnpt')\r\n                    } else if(name === 'Накладная склад №1'){\r\n                        props.history.push('/ns1')\r\n                    } else if(name === 'Накладная склад №2'){\r\n                        props.history.push('/ns2')\r\n                    } else if(name === 'Накладная на вечерний возврат'){\r\n                        props.history.push('/nnvv')\r\n                    } else if(name === 'Отчет реализатора'){\r\n                        props.history.push('/or')\r\n                    } else if(name === 'Отчет организатора'){\r\n                        props.history.push('/oo')\r\n                    } else {\r\n                        showAddMiniDialog()\r\n                    }\r\n                } else {\r\n                    let images = []\r\n                    for (let i = 0; i<colData.split('\\n').length; i++)\r\n                        images.push({original: colData.split('\\n')[i], thumbnail: colData.split('\\n')[i]})\r\n                    setMiniDialog('Просмотр', <ImageGallery items={images} showThumbnails={false} showFullscreenButton={false} showPlayButton={false} />);\r\n                    showMiniDialog(true)\r\n                }\r\n            },\r\n            onTableChange: (action, tableState) => {\r\n                if(action==='search'&&tableState.searchText===null){\r\n                    getData({search: '', sort: '', page: 0, name: name})\r\n                    setSelected(-1)\r\n                }\r\n            }\r\n        };\r\n        return (\r\n                <>\r\n                    {authenticated&&name!=''?\r\n                        <MuiThemeProvider theme={getMuiTheme()}>\r\n                            <MUIDataTable\r\n                                title={name}\r\n                                data={data1}\r\n                                columns={row}\r\n                                options={options}\r\n                            />\r\n                        </MuiThemeProvider>\r\n                        :\r\n                        <div className={classes.mainMessage}>\r\n                            <div className={classes.message}>\r\n                                <img style={{width:'200px'}} src={logo} /><br/>\r\n                                <br/>\r\n                                {message}\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </>\r\n            );\r\n        }\r\n)\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        table: state.table,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        mini_dialogActions: bindActionCreators(mini_dialogActions, dispatch),\r\n        tableActions: bindActionCreators(tableActions, dispatch),\r\n    }\r\n}\r\n\r\nTable.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(Table));","module.exports = __webpack_public_path__ + \"static/media/logo.587aa57a.png\";"],"sourceRoot":""}