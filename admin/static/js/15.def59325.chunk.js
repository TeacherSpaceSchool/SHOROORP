(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{369:function(e,a,t){"use strict";t.r(a),t.d(a,"datePicker",function(){return W});var n=t(380),l=t(9),r=t.n(l),i=t(19),c=t(17),o=t(0),s=t.n(o),d=t(3),m=t.n(d),v=t(4),u=t(62),p=t(38),g=t(79),b=t(50),k=t.n(b),h=t(408),f=t(100),E=t(31),y=t(386),z=t.n(y),O=t(385),j=t.n(O),x=t(398),S=t.n(x),w=t(399),N=t.n(w),R=t(400),T=t.n(R),D=t(41),J=t.n(D),C=t(390),I=t.n(C),A=t(102),W=s.a.createRef(),F=void 0===f.b||f.b.current.offsetWidth>800?240:120,H=s.a.memo(function(e){Object(o.useEffect)(function(){function a(){return(a=Object(c.a)(r.a.mark(function a(){var t,n,l,c,o,s,d,m;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("active"===y.status&&["admin","\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440","\u0437\u0430\u0432\u0441\u043a\u043b\u0430\u0434\u0430"].includes(y.role)||e.history.push("/"),-1!==u){a.next=37;break}return a.next=4,g.getDataSimple({name:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u041f\u043eID"});case 4:if(void 0===(t=a.sent)){a.next=35;break}if("\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440"!==y.role){a.next=35;break}return n=new Date,n=(n=JSON.stringify(n).split("-"))[2].split("T")[0]+" "+E.c[parseInt(n[1])-1]+" "+n[0].replace('"',""),a.next=12,g.getDataSimple({name:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f \u043d\u0430 \u0432\u0435\u0447\u0435\u0440\u043d\u0438\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442 \u043f\u043e \u0434\u0430\u043d\u043d\u044b\u043c",data:{data:n,organizator:t.guid,region:t.guidRegion}});case 12:if(void 0===(l=a.sent)||""===l){a.next=23;break}ee(l.data),H(l.organizator),L(l.region),M(l.guidOrganizator),X(l.guidRegion),be(JSON.parse(l.dataTable)),ve(l._id),a.next=35;break;case 23:return L(t.region),H(t.name),M(t.guid),X(t.guidRegion),c=new Date,c=(c=JSON.stringify(c).split("-"))[2].split("T")[0]+" "+E.c[parseInt(c[1])-1]+" "+c[0].replace('"',""),ee(c),a.next=33,g.getDataSimple({name:"\u0412\u0441\u0435 \u043e\u0442\u0447\u0435\u0442\u044b \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u043f\u043e \u0434\u0430\u0442\u0435",data:{data:c,organizator:t.guid,region:t.guidRegion}});case 33:if(void 0!=(t=a.sent)){for((ge=Object(i.a)({},ge)).m.data=[],ge.ch.data=[],ge.k.data=[],ge.m.all=0,ge.ch.all=0,ge.k.all=0,o=0;o<t.length;o++)(s=JSON.parse(t[o].dataTable)).vozvrat.v.mn.length>0&&Object(E.a)(s.vozvrat.v.ml)>0&&(ge.m.data.push({"\u2116":s.vozvrat.v.mn,l:s.vozvrat.v.ml}),ge.m.all+=s.vozvrat.v.ml),s.vozvrat.v.mn1.length>0&&Object(E.a)(s.vozvrat.v.ml1)>0&&(ge.m.data.push({"\u2116":s.vozvrat.v.mn1,l:s.vozvrat.v.ml1}),ge.m.all+=s.vozvrat.v.ml1),s.vozvrat.v.kn.length>0&&Object(E.a)(s.vozvrat.v.kl)>0&&(ge.k.data.push({"\u2116":s.vozvrat.v.kn,l:s.vozvrat.v.kl}),ge.k.all+=s.vozvrat.v.kl),s.vozvrat.v.kn1.length>0&&Object(E.a)(s.vozvrat.v.kl1)>0&&(ge.k.data.push({"\u2116":s.vozvrat.v.kn1,l:s.vozvrat.v.kl1}),ge.k.all+=s.vozvrat.v.kl1);be(ge)}case 35:a.next=45;break;case 37:return a.next=39,g.getDataSimple({name:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f \u043d\u0430 \u0432\u0435\u0447\u0435\u0440\u043d\u0438\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442 \u043f\u043e \u0434\u0430\u043d\u043d\u044b\u043c",data:{data:p[u][1],organizator:p[u][2],region:p[u][3]}});case 39:void 0!==(d=a.sent)&&(ee(d.data),H(d.organizator),L(d.region),M(d.guidOrganizator),X(d.guidRegion),be(JSON.parse(d.dataTable)),ve(d._id)),m=new Date,m=(m=JSON.stringify(m).split("-"))[2].split("T")[0]+" "+E.c[parseInt(m[1])-1]+" "+m[0].replace('"',""),R(m!==d.data);case 45:case"end":return a.stop()}},a,this)}))).apply(this,arguments)}!function(){a.apply(this,arguments)}()},[]);var a=e.tableActions,t=a.setSelected,l=a.addData,d=a.setData,m=a.setSelectedRegion,v=e.table,u=v.selected,p=v.data,b=v.name,f=e.classes,y=e.user.status,O=Object(o.useState)(!1),x=Object(n.a)(O,2),w=x[0],R=x[1],D=Object(o.useState)(""),C=Object(n.a)(D,2),F=C[0],H=C[1],_=Object(o.useState)(""),q=Object(n.a)(_,2),B=q[0],L=q[1],P=Object(o.useState)(""),G=Object(n.a)(P,2),K=G[0],M=G[1],Q=Object(o.useState)(""),U=Object(n.a)(Q,2),V=U[0],X=U[1];Object(o.useEffect)(function(){void 0!==V&&V.length>0&&m(V)},[V]);var Y=Object(o.useState)(""),Z=Object(n.a)(Y,2),$=Z[0],ee=Z[1],ae=Object(o.useState)(new Date),te=Object(n.a)(ae,2),ne=te[0],le=te[1],re=function(){var e=Object(c.a)(r.a.mark(function e(a){var t,n,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return le(a),a=(a=JSON.stringify(a).split("-"))[2].split("T")[0]+" "+E.c[parseInt(a[1])-1]+" "+a[0].replace('"',""),ee(a),ve(""),ge={m:{all:0,data:[],o:!1,p:!1},ch:{all:0,data:[],o:!1,p:!1},k:{all:0,data:[],o:!1,p:!1}},e.next=8,g.getDataSimple({name:"\u0412\u0441\u0435 \u043e\u0442\u0447\u0435\u0442\u044b \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u043f\u043e \u0434\u0430\u0442\u0435",data:{data:a,organizator:K,region:V}});case 8:if(void 0!=(t=e.sent))for(ge.m.data=[],ge.ch.data=[],ge.k.data=[],ge.m.all=0,ge.ch.all=0,ge.k.all=0,n=0;n<t.length;n++)(l=JSON.parse(t[n].dataTable)).vozvrat.v.mn.length>0&&Object(E.a)(l.vozvrat.v.ml)>0&&(ge.m.data.push({"\u2116":l.vozvrat.v.mn,l:l.vozvrat.v.ml}),ge.m.all+=l.vozvrat.v.ml),l.vozvrat.v.mn1.length>0&&Object(E.a)(l.vozvrat.v.ml1)>0&&(ge.m.data.push({"\u2116":l.vozvrat.v.mn1,l:l.vozvrat.v.ml1}),ge.m.all+=l.vozvrat.v.ml1),l.vozvrat.v.kn.length>0&&Object(E.a)(l.vozvrat.v.kl)>0&&(ge.k.all+=l.vozvrat.v.kl,ge.k.data.push({"\u2116":l.vozvrat.v.kn,l:l.vozvrat.v.kl})),l.vozvrat.v.kn1.length>0&&Object(E.a)(l.vozvrat.v.kl1)>0&&(ge.k.all+=l.vozvrat.v.kl1,ge.k.data.push({"\u2116":l.vozvrat.v.kn1,l:l.vozvrat.v.kl1}));be(ge);case 11:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),ie=Object(o.useState)(!1),ce=Object(n.a)(ie,2),oe=ce[0],se=(ce[1],Object(o.useState)("")),de=Object(n.a)(se,2),me=de[0],ve=de[1],ue=Object(o.useState)({m:{all:0,data:[],o:!1,p:!1},ch:{all:0,data:[],o:!1,p:!1},k:{all:0,data:[],o:!1,p:!1}}),pe=Object(n.a)(ue,2),ge=pe[0],be=pe[1],ke=function(e,a,t){(ge=Object(i.a)({},ge))[a][t]=e.target.checked,be(ge)};return s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("h1",null,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f \u043d\u0430 \u0432\u0435\u0447\u0435\u0440\u043d\u0438\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442"),s.a.createElement("b",null,"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440:"),"\xa0",F,"\xa0",s.a.createElement("b",null,"\u0420\u0435\u0433\u0438\u043e\u043d:"),"\xa0",B,s.a.createElement("br",null),-1===u&&["admin","\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440"].includes(y.role)?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){W.current.open()}},s.a.createElement("b",null,"\u0414\u0430\u0442\u0430:"),"\xa0",$),s.a.createElement(A.a,{style:{display:"none"},ref:W,className:f.textFieldSmall,value:ne,onChange:re})):s.a.createElement(s.a.Fragment,null,s.a.createElement("b",null,"\u0414\u0430\u0442\u0430:"),"\xa0",$,s.a.createElement("br",null)),s.a.createElement("br",null),s.a.createElement(S.a,null,s.a.createElement(N.a,{expandIcon:s.a.createElement(I.a,null)},s.a.createElement(J.a,{className:f.heading},"\u041c\u0430\u043a\u0441\u044b\u043c"),s.a.createElement(J.a,{className:f.secondaryHeading},s.a.createElement("div",{style:{display:"inline-block"}},s.a.createElement("b",{style:{color:"black"}},ge.m.all),"\xa0\xa0"))),ge.m.data.map(function(e,a){return s.a.createElement(T.a,{key:a,style:{padding:"0px"}},s.a.createElement("center",{style:{width:"100%"}},s.a.createElement("div",{style:{marginRight:"10px",display:"inline-block",verticalAlign:"middle",fontWeight:"bold"}},"\u2116:"),"\xa0",e["\u2116"],"\xa0\xa0",s.a.createElement("div",{style:{marginRight:"10px",display:"inline-block",verticalAlign:"middle",fontWeight:"bold"}},"\u041b\u0438\u0442\u0440:"),"\xa0",e.l))}),s.a.createElement(T.a,{style:{padding:"0px"}},s.a.createElement("center",{style:{width:"100%"}},s.a.createElement(j.a,{control:s.a.createElement(z.a,{checked:ge.m.o,color:"primary",disabled:"admin"!==y.role&&(w||ge.m.p||"\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440"!==y.role),onChange:function(e){ke(e,"m","o")}}),label:"\u041e\u0442\u043f\u0443\u0441\u0442\u0438\u043b"}),s.a.createElement(j.a,{control:s.a.createElement(z.a,{checked:ge.m.p,color:"primary",disabled:"admin"!==y.role&&(w||ge.m.p||oe||!ge.m.o||"\u0437\u0430\u0432\u0441\u043a\u043b\u0430\u0434\u0430"!==y.role),onChange:function(e){ke(e,"m","p")}}),label:"\u041f\u0440\u0438\u043d\u044f\u043b"}))),s.a.createElement("br",null)),s.a.createElement(S.a,null,s.a.createElement(N.a,{expandIcon:s.a.createElement(I.a,null)},s.a.createElement(J.a,{className:f.heading},"\u041a\u0432\u0430\u0441"),s.a.createElement(J.a,{className:f.secondaryHeading},s.a.createElement("div",{style:{display:"inline-block"}},s.a.createElement("b",{style:{color:"black"}},ge.k.all),"\xa0\xa0"))),ge.k.data.map(function(e,a){return s.a.createElement(T.a,{key:a,style:{padding:"0px"}},s.a.createElement("center",{style:{width:"100%"}},s.a.createElement("div",{style:{marginRight:"10px",display:"inline-block",verticalAlign:"middle",fontWeight:"bold"}},"\u2116:"),"\xa0",e["\u2116"],"\xa0\xa0",s.a.createElement("div",{style:{marginRight:"10px",display:"inline-block",verticalAlign:"middle",fontWeight:"bold"}},"\u041b\u0438\u0442\u0440:"),"\xa0",e.l))}),s.a.createElement(T.a,{style:{padding:"0px"}},s.a.createElement("center",{style:{width:"100%"}},s.a.createElement(j.a,{control:s.a.createElement(z.a,{checked:ge.k.o,color:"primary",disabled:"admin"!==y.role&&(w||ge.k.p||"\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440"!==y.role),onChange:function(e){ke(e,"k","o")}}),label:"\u041e\u0442\u043f\u0443\u0441\u0442\u0438\u043b"}),s.a.createElement(j.a,{control:s.a.createElement(z.a,{checked:ge.k.p,color:"primary",disabled:"admin"!==y.role&&(w||ge.k.p||oe||!ge.k.o||"\u0437\u0430\u0432\u0441\u043a\u043b\u0430\u0434\u0430"!==y.role),onChange:function(e){ke(e,"k","p")}}),label:"\u041f\u0440\u0438\u043d\u044f\u043b"}))),s.a.createElement("br",null)),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(h.a,{className:"link",to:""},s.a.createElement(k.a,{variant:"contained",color:"primary",onClick:Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("lol"===V){e.next=9;break}if(-1!==u){e.next=6;break}return e.next=4,l({search:"",sort:"",page:0,name:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f \u043d\u0430 \u0432\u0435\u0447\u0435\u0440\u043d\u0438\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442",data:{dataTable:JSON.stringify(ge),data:$,organizator:F,region:B,guidOrganizator:K,guidRegion:V,disabled:oe}});case 4:e.next=8;break;case 6:return e.next=8,d({id:me,search:"",sort:"",page:0,name:"admin"===y.role?b:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f \u043d\u0430 \u0432\u0435\u0447\u0435\u0440\u043d\u0438\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442",data:{dataTable:JSON.stringify(ge),data:$,organizator:F,region:B,guidOrganizator:K,guidRegion:V,disabled:oe}});case 8:t(-1);case 9:case"end":return e.stop()}},e,this)})),className:f.button},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),s.a.createElement(h.a,{className:"link",to:"",onClick:function(){t(-1)}},s.a.createElement(k.a,{variant:"contained",color:"secondary",className:f.button},"\u041e\u0442\u043c\u0435\u043d\u0430"))))});Event.propTypes={classes:m.a.object.isRequired},a.default=Object(v.withStyles)(function(e){return{button:{margin:e.spacing.unit},textFieldSmall:{display:"inline-block",marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:F},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}})(Object(u.b)(function(e){return{user:e.user,table:e.table}},function(e){return{tableActions:Object(p.b)(g,e)}})(H))}}]);
//# sourceMappingURL=15.def59325.chunk.js.map